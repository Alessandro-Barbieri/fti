<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Fault Tolerance Interface: src/recover.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Fault Tolerance Interface
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">recover.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Recovery functions for the FTI library.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="fti_8h_source.html">fti.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for recover.c:</div>
<div class="dyncontent">
<div class="center"><img src="recover_8c__incl.png" border="0" usemap="#src_2recover_8c" alt=""/></div>
<map name="src_2recover_8c" id="src_2recover_8c">
<area shape="rect" id="node2" href="fti_8h.html" title="Header file for the FTI library. " alt="" coords="402,80,445,107"/><area shape="rect" id="node11" href="iniparser_8h.html" title="Parser for ini files. " alt="" coords="237,155,319,181"/><area shape="rect" id="node13" href="galois_8h.html" title="galois.h" alt="" coords="625,229,692,256"/><area shape="rect" id="node14" href="jerasure_8h.html" title="jerasure.h" alt="" coords="643,155,721,181"/><area shape="rect" id="node12" href="dictionary_8h.html" title="Implements a dictionary for string variables. " alt="" coords="262,229,351,256"/></map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a888fd5a379af7c7a6dd14f3c543d683b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="recover_8c.html#a888fd5a379af7c7a6dd14f3c543d683b">FTI_CheckFile</a> (char *fn, unsigned long fs)</td></tr>
<tr class="memdesc:a888fd5a379af7c7a6dd14f3c543d683b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if a file exist and that its size is 'correct'.  <a href="#a888fd5a379af7c7a6dd14f3c543d683b">More...</a><br/></td></tr>
<tr class="separator:a888fd5a379af7c7a6dd14f3c543d683b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea7e50170c704343bb574920ac96cdcd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="recover_8c.html#aea7e50170c704343bb574920ac96cdcd">FTI_CheckErasures</a> (unsigned long *fs, unsigned long *maxFs, int group, int *erased, int level)</td></tr>
<tr class="memdesc:aea7e50170c704343bb574920ac96cdcd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detects all the erasures for a particular level.  <a href="#aea7e50170c704343bb574920ac96cdcd">More...</a><br/></td></tr>
<tr class="separator:aea7e50170c704343bb574920ac96cdcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9680b701401c4067be914e5598d43a30"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="recover_8c.html#a9680b701401c4067be914e5598d43a30">FTI_RecoverFiles</a> ()</td></tr>
<tr class="memdesc:a9680b701401c4067be914e5598d43a30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decides wich action take depending on the restart level.  <a href="#a9680b701401c4067be914e5598d43a30">More...</a><br/></td></tr>
<tr class="separator:a9680b701401c4067be914e5598d43a30"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Recovery functions for the FTI library. </p>
<dl class="section author"><dt>Author</dt><dd>Leonardo A. Bautista Gomez (<a href="#" onclick="location.href='mai'+'lto:'+'leo'+'ba'+'go@'+'gm'+'ail'+'.c'+'om'; return false;">leoba<span style="display: none;">.nosp@m.</span>go@g<span style="display: none;">.nosp@m.</span>mail.<span style="display: none;">.nosp@m.</span>com</a>) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>January, 2014 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="aea7e50170c704343bb574920ac96cdcd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int FTI_CheckErasures </td>
          <td>(</td>
          <td class="paramtype">unsigned long *&#160;</td>
          <td class="paramname"><em>fs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long *&#160;</td>
          <td class="paramname"><em>maxFs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>group</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>erased</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Detects all the erasures for a particular level. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fs</td><td>The ckpt. file size for this process. </td></tr>
    <tr><td class="paramname">maxFs</td><td>The max. ckpt. file size in the group. </td></tr>
    <tr><td class="paramname">group</td><td>The group ID. </td></tr>
    <tr><td class="paramname">erased</td><td>The array of erasures to fill. </td></tr>
    <tr><td class="paramname">level</td><td>The ckpt. level to check for erasures. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>integer FTI_SCES if successful.</dd></dl>
<p>This function detects all the erasures for L1, L2 and L3. It return the results in the erased array. The search for erasures is done at the three levels independently on the current recovery level. </p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="recover_8c_aea7e50170c704343bb574920ac96cdcd_cgraph.png" border="0" usemap="#recover_8c_aea7e50170c704343bb574920ac96cdcd_cgraph" alt=""/></div>
<map name="recover_8c_aea7e50170c704343bb574920ac96cdcd_cgraph" id="recover_8c_aea7e50170c704343bb574920ac96cdcd_cgraph">
<area shape="rect" id="node2" href="meta_8c.html#aded40228f27b54245ba7e64123fbac6f" title="It gets the metadata to recover the data after a failure. " alt="" coords="197,95,296,121"/><area shape="rect" id="node3" href="tools_8c.html#a691a9e560e92286bb5bc1b5cf2f7b199" title="Prints FTI messages. " alt="" coords="375,5,451,32"/><area shape="rect" id="node8" href="recover_8c.html#a888fd5a379af7c7a6dd14f3c543d683b" title="Check if a file exist and that its size is &#39;correct&#39;. " alt="" coords="193,145,301,172"/><area shape="rect" id="node4" href="iniparser_8h.html#ab0be559bfb769224b3f1b75e26242a67" title="Parse an ini file and return an allocated dictionary object. " alt="" coords="362,56,465,83"/><area shape="rect" id="node5" href="iniparser_8h.html#a7894f8480e1f254d4a1b4a31bdc51b46" title="Get the string associated to a key. " alt="" coords="349,107,477,133"/><area shape="rect" id="node6" href="iniparser_8h.html#a694eb1110f4200db8648820a0bb405fa" title="Get the string associated to a key, convert to an int. " alt="" coords="358,157,469,184"/><area shape="rect" id="node7" href="iniparser_8h.html#a90549ee518523921886b74454ff872eb" title="Free all memory associated to an ini dictionary. " alt="" coords="353,208,474,235"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a888fd5a379af7c7a6dd14f3c543d683b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int FTI_CheckFile </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>fs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if a file exist and that its size is 'correct'. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fn</td><td>The ckpt. file name to check. </td></tr>
    <tr><td class="paramname">fs</td><td>The ckpt. file size tocheck. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>integer 0 if file exists, 1 if not or wrong size.</dd></dl>
<p>This function checks whether a file exist or not and if its size is the expected one. </p>

</div>
</div>
<a class="anchor" id="a9680b701401c4067be914e5598d43a30"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int FTI_RecoverFiles </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decides wich action take depending on the restart level. </p>
<dl class="section return"><dt>Returns</dt><dd>integer FTI_SCES if successful.</dd></dl>
<p>This function launchs the required action depending on the recovery level. The recovery level is detected from the checkpoint ID of the last checkpoint taken. </p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="recover_8c_a9680b701401c4067be914e5598d43a30_cgraph.png" border="0" usemap="#recover_8c_a9680b701401c4067be914e5598d43a30_cgraph" alt=""/></div>
<map name="recover_8c_a9680b701401c4067be914e5598d43a30_cgraph" id="recover_8c_a9680b701401c4067be914e5598d43a30_cgraph">
<area shape="rect" id="node2" href="meta_8c.html#aded40228f27b54245ba7e64123fbac6f" title="It gets the metadata to recover the data after a failure. " alt="" coords="560,157,659,184"/><area shape="rect" id="node3" href="tools_8c.html#a691a9e560e92286bb5bc1b5cf2f7b199" title="Prints FTI messages. " alt="" coords="765,360,841,387"/><area shape="rect" id="node8" href="tools_8c.html#a8cbc6d4dbac880f834ca50d04191c194" title="It erases the previous checkpoints and their metadata. " alt="" coords="196,613,279,640"/><area shape="rect" id="node10" href="postreco_8c.html#a210a66fe20b09f175a3f38fc10642021" title="Recover L4 ckpt. files from the PFS. " alt="" coords="181,399,293,425"/><area shape="rect" id="node13" href="postreco_8c.html#a48ba4bf325b4480d61c21aa7233777b1" title="Recover L3 ckpt. files ordering the RS decoding algorithm. " alt="" coords="181,284,293,311"/><area shape="rect" id="node18" href="postreco_8c.html#ab8bb89b65605ebac18d1bd95b9edd500" title="Recover L2 ckpt. files using the partner copy. " alt="" coords="181,449,293,476"/><area shape="rect" id="node19" href="postreco_8c.html#a5f200679ee6c3d6b10b0cb7963e9f31f" title="Checks that all L1 ckpt. files are present. " alt="" coords="181,348,293,375"/><area shape="rect" id="node4" href="iniparser_8h.html#ab0be559bfb769224b3f1b75e26242a67" title="Parse an ini file and return an allocated dictionary object. " alt="" coords="751,233,854,260"/><area shape="rect" id="node5" href="iniparser_8h.html#a7894f8480e1f254d4a1b4a31bdc51b46" title="Get the string associated to a key. " alt="" coords="739,81,867,108"/><area shape="rect" id="node6" href="iniparser_8h.html#a694eb1110f4200db8648820a0bb405fa" title="Get the string associated to a key, convert to an int. " alt="" coords="747,132,858,159"/><area shape="rect" id="node7" href="iniparser_8h.html#a90549ee518523921886b74454ff872eb" title="Free all memory associated to an ini dictionary. " alt="" coords="742,183,863,209"/><area shape="rect" id="node9" href="tools_8c.html#ac4bfe54a9748e8915a5a43c17b334452" title="It erases a directory and all its files. " alt="" coords="367,613,454,640"/><area shape="rect" id="node11" href="recover_8c.html#aea7e50170c704343bb574920ac96cdcd" title="Detects all the erasures for a particular level. " alt="" coords="341,360,480,387"/><area shape="rect" id="node12" href="recover_8c.html#a888fd5a379af7c7a6dd14f3c543d683b" title="Check if a file exist and that its size is &#39;correct&#39;. " alt="" coords="555,411,663,437"/><area shape="rect" id="node14" href="postreco_8c.html#a75f076e55f9c53256d7866882a36d534" title="Recover a set of ckpt. files using RS decoding. " alt="" coords="363,107,458,133"/><area shape="rect" id="node15" href="galois_8h.html#a9ccbbf5999f106f9b37e21f821405b87" title="galois_single_divide" alt="" coords="540,107,679,133"/><area shape="rect" id="node16" href="jerasure_8h.html#aa134c10efabbe8620ba8de7ebe37c0f5" title="jerasure_invert_matrix" alt="" coords="534,5,685,32"/><area shape="rect" id="node17" href="jerasure_8h.html#ae64314475c098664deb5eb2b9f1d41aa" title="jerasure_matrix_dotprod" alt="" coords="529,56,690,83"/></map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Nov 13 2014 23:12:14 for Fault Tolerance Interface by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
